<html>
<head>
	<LINK REL=StyleSheet HREF="aural.css" TYPE="text/css" MEDIA=aural>
</head>
<div>
<div>
<table style="height: 87px; background-color: #666666; border-color: #000000; margin-left: auto; margin-right: auto;" border="7" width="500">
<tbody>
<tr>
<td style="width: 636px; border-color: #000000;">
<h1 style="text-align: center;"><span style="color: #800080;"><strong>ooof</strong></span></h1>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div></div>
<div>
<table style="height: 0px; background-color: #666666; border-color: #222222; width: 472px; margin-left: auto; margin-right: auto;" border="5"><caption>
<h2><span style="color: #ff9900;">

	<span id='game_name_display'></span>

</span></h2>
</caption>
<tbody>
<tr>
<td style="width: 100%; text-align: center;">
<table style="width: 100%; height: 0px; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="width: 100%; text-align: center;">
<table style="width: 100%;">
<tbody>
<tr>
<td id="first" style="text-align: center;">1st</td>
</tr>
<tr>
<td>
<table style="width: 100%;">
<tbody>
<tr>
<td id="second" style="width: 50%; text-align: center;">2nd</td>
<td id="third" style="width: 50%; text-align: center;">3rd</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td id="noobs" style="text-align: center;">
	<span id='noobs'></span>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
<span id="php"></span>
</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

<script src="connectSocket.js"></script>

<script>
	(function(){
	
		var element = function(id){
			return document.getElementById(id)
		}
		
		var noobs = element('noobs')
		var game_name_display = element('game_name_display')
	
		game_name_display.innerHTML = "Room: " + localStorage.game_name
		
		// Connect to socket.io
		var socket = returnSocket()
		
		// Check for connection
		if(socket !== undefined){
		
			console.log('Connected to socket...');
			
			// Connect to room
			socket.on('connect', () => {
				socket.emit('join_room', {
					room_name: localStorage.game_name
				})
			})
			
			// Handle showing players
			socket.on('show_player_score', (data) => {
				console.log('show player')
				var display_txt = data.user_name + ': ' + data.score + '<br>'
				noobs.insertAdjacentHTML('afterbegin', display_txt);
			})
			
			// Handle end of game
			socket.on('finish_game', () => {
				localStorage.clear()
				window.location.replace('index.html')
			})
			
			// Handle moving to next round of responses
			socket.on('move_to_reponses', () => {
				window.location.replace('./game/game.html')
			})
			
			// Handle request to remove user from current room
			socket.on('remove_self_from_room', () => {
				socket.emit('remove_user_from_room', {
					room_name: localStorage.game_name
				})
			})
		}
	})();
</script>